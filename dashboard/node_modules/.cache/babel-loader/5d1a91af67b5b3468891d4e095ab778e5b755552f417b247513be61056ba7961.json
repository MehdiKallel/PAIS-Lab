{"ast":null,"code":"var _jsxFileName = \"/home/mehdi/PAIS-Lab/my-app/src/pages/Dashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const [orders, setOrders] = useState(null);\n  const [results, setResults] = useState(null);\n  const [regex, setRegex] = useState(\"\");\n  const [error, setError] = useState(null); // New state for error\n\n  useEffect(() => {\n    const socket = io(\"http://localhost:4000\");\n    socket.on(\"db_update_orders\", updatedOrders => {\n      setOrders(updatedOrders);\n    });\n    socket.on(\"db_update_results\", updatedResults => {\n      setResults(updatedResults);\n    });\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: 'left',\n      fontFamily: 'Arial, sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        fontSize: '2em',\n        margin: '0.5em 0'\n      },\n      children: \"Orders Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        margin: '0.5em 0'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '1.5em',\n        margin: '0.5em 0'\n      },\n      children: \"Raw Text Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        margin: '0.5em 0'\n      },\n      children: Array.isArray(orders) && orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [\"Author: \", order.author_name, \" / Content: \", order.content]\n      }, order._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        fontSize: '1.5em',\n        margin: '0.5em 0'\n      },\n      children: \"Results Queue\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), Array.isArray(results) && results.map((result, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '0.5em 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1.3em',\n          margin: '0.5em 0'\n        },\n        children: [\"Rule Match \", index + 1, \": \", result.rule]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          margin: '0.5em 0'\n        },\n        children: result.matched_orders.map(order => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [\"Order ID: \", order._id, \" / Content: \", order.content, \" / Author: \", order.author_name]\n        }, order._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, result._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"2eN20KmHoAxmqEOhml794bNfcsU=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","io","jsxDEV","_jsxDEV","Dashboard","_s","orders","setOrders","results","setResults","regex","setRegex","error","setError","socket","on","updatedOrders","updatedResults","disconnect","style","textAlign","fontFamily","children","fontSize","margin","fileName","_jsxFileName","lineNumber","columnNumber","color","Array","isArray","map","order","author_name","content","_id","result","index","rule","matched_orders","_c","$RefreshReg$"],"sources":["/home/mehdi/PAIS-Lab/my-app/src/pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport io from \"socket.io-client\";\nimport OrderService from \"../api/OrderService\";\n\ninterface Order {\n  _id: string;\n  content: string;\n  author_name: string;\n}\n\ninterface Result {\n  _id: string;\n  rule: string;\n  matched_orders: Order[];\n}\n\nconst Dashboard: React.FC = () => {\n  const [orders, setOrders] = useState<Order[] | null>(null);\n  const [results, setResults] = useState<Result[] | null>(null);\n  const [regex, setRegex] = useState<string>(\"\");\n  const [error, setError] = useState<string | null>(null); // New state for error\n\n  useEffect(() => {\n    const socket = io(\"http://localhost:4000\");\n    socket.on(\"db_update_orders\", (updatedOrders: Order[]) => {\n      setOrders(updatedOrders);\n    });\n\n    socket.on(\"db_update_results\", (updatedResults: Result[]) => {\n      setResults(updatedResults);\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n  }, []);\n\n  return (\n    <div style={{ textAlign: 'left', fontFamily: 'Arial, sans-serif' }}>\n      <h1 style={{ fontSize: '2em', margin: '0.5em 0' }}>Orders Dashboard</h1>\n      {error && <div style={{ color: 'red', margin: '0.5em 0' }}>{error}</div>}\n      <h2 style={{ fontSize: '1.5em', margin: '0.5em 0' }}>Raw Text Orders</h2>\n      <ul style={{ margin: '0.5em 0' }}>\n        {Array.isArray(orders) && orders.map((order) => (\n          <li key={order._id}>Author: {order.author_name} / Content: {order.content}</li>\n        ))}\n      </ul>\n      <h2 style={{ fontSize: '1.5em', margin: '0.5em 0' }}>Results Queue</h2>\n      {Array.isArray(results) && results.map((result, index) => (\n        <div key={result._id} style={{ margin: '0.5em 0' }}>\n          <h3 style={{ fontSize: '1.3em', margin: '0.5em 0' }}>Rule Match {index + 1}: {result.rule}</h3>\n          <ul style={{ margin: '0.5em 0' }}>\n            {result.matched_orders.map((order) => (\n              <li key={order._id}>Order ID: {order._id} / Content: {order.content} / Author: {order.author_name}</li>\n            ))}\n          </ul>\n        </div>\n      ))} \n    </div>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}